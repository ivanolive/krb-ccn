#!/usr/bin/bash
#content packet size
PACKET_SIZE=$1

rm *.png
rm *.csv

################################ N x N client servers experiments for symm key setup
sh experiments_clean.sh
sleep 2s
sh setup_network.sh 10 sk &
sleep 10s
echo 10
sleep 1s
sh run_clients.sh 10 10 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 50 sk &
sleep 10s
echo 50
sleep 1s
sh run_clients.sh 50 50 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 100 sk &
sleep 10s
echo 100
sleep 1s
sh run_clients.sh 100 100 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 150 sk &
sleep 10s
echo 150
sleep 1s
sh run_clients.sh 150 150 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 200 sk &
sleep 10s
echo 200
sleep 1s
sh run_clients.sh 200 200 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 250 sk &
sleep 10s
echo 250
sleep 1s
sh run_clients.sh 250 250 $PACKET_SIZE sk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 300 sk &
sleep 10s
echo 300
sleep 1s
sh run_clients.sh 300 300 $PACKET_SIZE sk
sleep 2s

sleep 10s

cp *sk*.png ../experiments/symm_key
cp *sk*.csv ../experiments/symm_key

##SETUP NETWORK W/ 1 procuccers in public key mode
sh experiments_clean.sh
sleep 2s
sh setup_network.sh 300 pk &
sleep 5s

################################ N x N client servers experiments for public key setup


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 10 pk &
sleep 10s
echo 10
sleep 1s
sh run_clients.sh 10 10 $PACKET_SIZE pk
sleep 2s

sh experiments_clean.sh
sleep 2s
sh setup_network.sh 50 pk &
sleep 10s
echo 50
sleep 1s
sh run_clients.sh 50 50 $PACKET_SIZE pk
sleep 2s

sh experiments_clean.sh
sleep 2s
sh setup_network.sh 100 pk &
sleep 10s
echo 100
sleep 1s
sh run_clients.sh 100 100 $PACKET_SIZE pk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 150 pk &
sleep 10s
echo 150
sleep 1s
sh run_clients.sh 150 150 $PACKET_SIZE pk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 200 pk &
sleep 10s
echo 200
sleep 1s
sh run_clients.sh 200 200 $PACKET_SIZE pk
sleep 2s


sh experiments_clean.sh
sleep 2s
sh setup_network.sh 250 pk &
sleep 10s
echo 250
sleep 1s
sh run_clients.sh 250 250 $PACKET_SIZE pk
sleep 2s

sh experiments_clean.sh
sleep 2s
sh setup_network.sh 300 pk &
sleep 10s
echo 300
sleep 1s
sh run_clients.sh 300 300 $PACKET_SIZE pk
sleep 2s

sh experiments_clean.sh

cp *pk*.png ../experiments/public_key
cp *pk*.csv ../experiments/public_key

