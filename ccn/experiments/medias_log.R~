
v1 = read.csv("./public_key/throughput_pk_1_1.csv",sep=',')
v2 = read.csv("./symm_key/throughput_sk_1_1.csv",sep=',')

a=aggregate(v1,by=list(v1$n_pkt),FUN=mean)
b=aggregate(v2,by=list(v2$n_pkt),FUN=mean)

png("throughput.png")
plot(a$n_pkt,8*(a$thput)/1000000,type='l',xlab="Interest issuance rate per consumer per second",ylab="Data rate per consumer[mbps]")
lines(b$n_pkt,8*(b$thput))
grid(10,10)
dev.off()

total =length(b$V1)
totalf =length(f$V1)
totalp =length(p$V1)

b = b[b$V3!="False",]
f = f[f$V3!="False",]
p = p[p$V3!="False",]
#png("comp.png")
#par(mfrow=c(1,2))
#boxplot(p$V4,b$V4,names = c("protocolo","bubble"),main="Messages Transmitted")

x = c(1,3,6,12,24,48,96,7*24,14*24,21*24,42*24)
#png("boxplot.png")
#boxplot(p[p$V5<48,]$V5,b[b$V5<48,]$V5,names = c("protocolo","bubble"),main="Delivery times")
#dev.off()

bt1 = length(b[b$V5 <=1,]$V1)/total

bt2 = length(b[b$V5 <=3,]$V1)/total

bt3 = length(b[b$V5 <=6,]$V1)/total

bt4 = length(b[b$V5 <=12,]$V1)/total

bt5 = length(b[b$V5 <=24,]$V1)/total

bt6 = length(b[b$V5 <=48,]$V1)/total

bt7 = length(b[b$V5 <=96,]$V1)/total

bt8 = length(b[b$V5 <=7*24,]$V1)/total

bt9 = length(b[b$V5 <=14*24,]$V1)/total

bt10 = length(b[b$V5 <=21*24,]$V1)/total

bt11 = length(b[b$V5 <=42*24,]$V1)/total

ft1 = length(f[f$V5 <=1,]$V1)/totalf

ft2 = length(f[f$V5 <=3,]$V1)/totalf

ft3 = length(f[f$V5 <=6,]$V1)/totalf

ft4 = length(f[f$V5 <=12,]$V1)/totalf

ft5 = length(f[f$V5 <=24,]$V1)/totalf

ft6 = length(f[f$V5 <=48,]$V1)/totalf

ft7 = length(f[f$V5 <=96,]$V1)/totalf

ft8 = length(f[f$V5 <=7*24,]$V1)/totalf

ft9 = length(f[f$V5 <=14*24,]$V1)/totalf

ft10 = length(f[f$V5 <=21*24,]$V1)/totalf

ft11 = length(f[f$V5 <=42*24,]$V1)/totalf

pt1 = length(p[p$V5 <=1,]$V1)/totalp

pt2 = length(p[p$V5 <=3,]$V1)/totalp

pt3 = length(p[p$V5 <=6,]$V1)/totalp

pt4 = length(p[p$V5 <=12,]$V1)/totalp

pt5 = length(p[p$V5 <=24,]$V1)/totalp

pt6 = length(p[p$V5 <=48,]$V1)/totalp

pt7 = length(p[p$V5 <=96,]$V1)/totalp

pt8 = length(p[p$V5 <=7*24,]$V1)/totalp

pt9 = length(p[p$V5 <=14*24,]$V1)/totalp

pt10 = length(p[p$V5 <=21*24,]$V1)/totalp

pt11 = length(p[p$V5 <=42*24,]$V1)/totalp

x = c(1,3,6,12,24,48,96,7*24,14*24,21*24)
y1= c(bt1,bt2,bt3,bt4,bt5,bt6,bt7,bt8,bt9,bt10)
y2= c(ft1,ft2,ft3,ft4,ft5,ft6,ft7,ft8,ft9,ft10)
y3= c(pt1,pt2,pt3,pt4,pt5,pt6,pt7,pt8,pt9,pt10)

png("deliv_log.png")
plot(x,100*y1, type="b",col="blue",ylim = c(0,115),ylab="Delivery Ratio (%)",xlab = "Time(h)",lty=2,lwd=3,pch=0,log="x")
par(new = TRUE)
plot(x,100*y2, type="b",col="red",ylim = c(0,115),lwd=3,pch=4,ylab="",xlab="",log="x")
par(new = TRUE)
plot(x,100*y3, type="b",col="black",ylim = c(0,115),lwd=3,pch=6,ylab="",xlab="",log="x")
grid(10,10)
legend('topleft', c("Groups-Net","Bubble Rap","Flooding") , lty=1, col=c('black','blue', 'red'), bty='n', cex=1.5,lwd = 2,pch=c(6,0,4))
dev.off()


bt1 = sum(read.csv("b_1h.txt",head=F))/total

bt2 = sum(read.csv("b_3h.txt",head=F))/total

bt3 = sum(read.csv("b_6h.txt",head=F))/total

bt4 = sum(read.csv("b_12h.txt",head=F))/total

bt5 = sum(read.csv("b_24h.txt",head=F))/total

bt6 = sum(read.csv("b_48h.txt",head=F))/total

bt7 = sum(read.csv("b_96h.txt",head=F))/total

bt8 = sum(read.csv("b_1w.txt",head=F))/total

bt9 = sum(read.csv("b_2w.txt",head=F))/total

bt10 = sum(read.csv("b_3w.txt",head=F))/total

bt11 = sum(read.csv("b_6w.txt",head=F))/total

ft1 = sum(read.csv("f_1h.txt",head=F))/totalf

ft2 = sum(read.csv("f_3h.txt",head=F))/totalf

ft3 = sum(read.csv("f_6h.txt",head=F))/totalf

ft4 = sum(read.csv("f_12h.txt",head=F))/totalf

ft5 = sum(read.csv("f_24h.txt",head=F))/totalf

ft6 = sum(read.csv("f_48h.txt",head=F))/totalf

ft7 = sum(read.csv("f_96h.txt",head=F))/totalf

ft8 = sum(read.csv("f_1w.txt",head=F))/totalf

ft9 = sum(read.csv("f_2w.txt",head=F))/totalf

ft10 = sum(read.csv("f_3w.txt",head=F))/totalf

ft11 = sum(read.csv("f_6w.txt",head=F))/totalf

pt1 = sum(read.csv("result_gnet/p_1h.txt",head=F))/totalp

pt2 = sum(read.csv("result_gnet/p_3h.txt",head=F))/totalp

pt3 = sum(read.csv("result_gnet/p_6h.txt",head=F))/totalp

pt4 = sum(read.csv("result_gnet/p_12h.txt",head=F))/totalp

pt5 = sum(read.csv("result_gnet/p_24h.txt",head=F))/totalp

pt6 = sum(read.csv("result_gnet/p_48h.txt",head=F))/totalp

pt7 = sum(read.csv("result_gnet/p_96h.txt",head=F))/totalp

pt8 = sum(read.csv("result_gnet/p_1w.txt",head=F))/totalp

pt9 = sum(read.csv("result_gnet/p_2w.txt",head=F))/totalp

pt10 = sum(read.csv("result_gnet/p_3w.txt",head=F))/totalp

#pt11 = sum(read.csv("result_gnet/p_6w.txt",head=F))/totalp


x = c(1,3,6,12,24,48,96,7*24,14*24,21*24)
y1= c(bt1,bt2,bt3,bt4,bt5,bt6,bt7,bt8,bt9,bt10)
y2= c(ft1,ft2,ft3,ft4,ft5,ft6,ft7,ft8,ft9,ft10)
y3= c(pt1,pt2,pt3,pt4,pt5,pt6,pt7,pt8,pt9,pt10)

png("overhead_log.png")
plot(x,y1, type="b",col="blue",ylim = c(0,bt11+30),ylab="# of Transmissions/Message",xlab = "Time(h)",lty=2,lwd=3,pch=0,log="x")
par(new = TRUE)
plot(x,y2, type="b",col="red",ylim = c(0,bt11+30),lwd=3,pch=4,ylab="",xlab="",log="x")
par(new = TRUE)
plot(x,y3, type="b",col="black",ylim = c(0,bt11+30),lwd=3,pch=6,ylab="",xlab="",log="x")
grid(10,10)
#plot(x,100*y1,col="blue",type="b",ylim=c(0,70))
legend('topleft', c("Groups-Net","Bubble Rap","Flooding") , lty=1, col=c('black','blue', 'red'), bty='n', cex=1.5,lwd = 2,pch=c(6,0,4))
dev.off()


